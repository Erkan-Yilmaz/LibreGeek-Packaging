#!/usr/bin/make -f
# See: https://github.com/RPCS3/rpcs3/blob/master/.travis.yml
# https://github.com/RPCS3/rpcs3

##############################################################
# Clang and GCC are too old on Debian Jessie, use Stretch
##############################################################
# Using clang:
# cmake -DCMAKE_CXX_COMPILER=clang++ -DCMAKE_C_COMPILER=clang

# Using gcc
# cmake -DCMAKE_CXX_COMPILER=g++ -DCMAKE_C_COMPILER=gcc
##############################################################

%:
	dh $@

override_dh_auto_clean:

override_dh_auto_configure:

override_dh_auto_build:
	rm -rf rpcs3/build && mkdir -p rpcs3/build
	cd rpcs3/build && cmake \
			-DCMAKE_BUILD_TYPE='Release' \ 
			-DCMAKE_CXX_COMPILER=clang++ \
			-DCMAKE_C_COMPILER=clang \
			-DUSE_SYSTEM_LIBPNG='ON' \ 
			-DUSE_SYSTEM_FFMPEG='ON' \
			-DCMAKE_INSTALL_PREFIX=/usr ..
	make
